---
title: "Practial Machine Learning Course Project"
author: "Roger Hu"
date: "7/29/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = TRUE)
```

```{r load package, include = FALSE}
pkgs <- c("caret","ggplot2","dplyr")
check <- sapply(pkgs,require,warn.conflicts = TRUE,character.only = TRUE)

if(any(!check)){
        pkgs.missing <- pkgs[!check]
        install.packages(pkgs.missing)
        check <- sapply(pkgs.missing,require,warn.conflicts = TRUE,character.only = TRUE)
}
```

```{r download data, include = FALSE}
if (!file.exists("data/pml-training.csv")) {
        dir.create("data", showWarnings = F)
        download.file(
                "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv",
                "data/pml-training.csv")
}

if (!file.exists("data/pml-testing.csv")) {
        dir.create("data", showWarnings = F)
        download.file(
                "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv",
                "data/pml-testing.csv")
}
```

## Load Data into R

```{r}
set.seed(95130)
pml_train <- read.csv("./data/pml-training.csv")
pml_test <- read.csv("./data/pml-testing.csv")
inTrain <- createDataPartition(y = pml_train$classe, p = 0.75, list = FALSE)
training <- pml_train[inTrain,]
testing <- pml_train[-inTrain,]

```


## Feature Selection

Upon initial examination of the data contained in the `pml-training.csv` file, the following observations are noted:

1. The first column 'X' is the index of observations and should be removed from analysis.

```{r}
str(pml_train[,1])
```


2. Columns 3-7 contain infomation on time stamps/time window when data were recorded
```{r}
str(pml_train[,3:7])
```


3. Near zero variance variables
```{r}
nzv <- nearZeroVar(pml_train)
colnames(pml_train)[nzv]

```

  * Those near zero variance variables only contain data when `new_window` variable is `yes` and are null otherwise. They all seem to be "engineered" variables (var, std, amplitude, min, max, and etc.) from the direct input data by the sensors. Thus, I choose to remove them from the analysis.
  
4. 

